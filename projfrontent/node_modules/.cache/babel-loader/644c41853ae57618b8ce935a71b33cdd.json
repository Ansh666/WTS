{"ast":null,"code":"import _createForOfIteratorHelper from\"E:/PROJECTS/Python/WTS/projfrontent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import{API}from\"../../backend\";import{cartEmpty}from\"../../core/helper/cartHelper\";export var signup=function signup(user){return fetch(\"\".concat(API,\"user/\"),{method:\"POST\",headers:{Accept:\"application/json\",\"content-Type\":\"application/json\"},body:JSON.stringify(user)}).then(function(response){return response.json();}).catch(function(err){return console.log(err);});};export var signin=function signin(user){var formData=new FormData();for(var name in user){console.log(user[name]);formData.append(name,user[name]);}// const {email, password} = user;\n// const formData = new FormData();\n// formData.append('email', email)\n// formData.append('password', password)\nvar _iterator=_createForOfIteratorHelper(formData.keys()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;console.log(\"MYKEY: \",key);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return fetch(\"\".concat(API,\"user/login/\"),{method:\"POST\",body:formData}).then(function(response){console.log(\"SUCCESS\",response);return response.json();}).catch(function(err){return console.log(err);});};export var authenticate=function authenticate(data,next){if(typeof window!==undefined){localStorage.setItem(\"jwt\",JSON.stringify(data));next();}};export var isAuthenticated=function isAuthenticated(){if(typeof window==undefined){return false;}if(localStorage.getItem(\"jwt\")){return JSON.parse(localStorage.getItem(\"jwt\"));}else{return false;}};export var signout=function signout(next){var userId=isAuthenticated()&&isAuthenticated().user.id;console.log(\"USERID: \",userId);if(typeof window!==undefined){localStorage.removeItem(\"jwt\");cartEmpty(function(){});//next();\nreturn fetch(\"\".concat(API,\"user/logout/\").concat(userId),{method:\"GET\"}).then(function(response){console.log(\"Signout success\");next();}).catch(function(err){return console.log(err);});}};","map":{"version":3,"sources":["E:/PROJECTS/Python/WTS/projfrontent/src/auth/helper/index.js"],"names":["API","cartEmpty","signup","user","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","catch","err","console","log","signin","formData","FormData","name","append","keys","key","authenticate","data","next","window","undefined","localStorage","setItem","isAuthenticated","getItem","parse","signout","userId","id","removeItem"],"mappings":"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","sourcesContent":["import { API } from \"../../backend\";\r\nimport { cartEmpty } from \"../../core/helper/cartHelper\";\r\n\r\nexport const signup = (user) => {\r\n  return fetch(`${API}user/`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(user),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const signin = (user) => {\r\n  const formData = new FormData();\r\n\r\n  for (const name in user) {\r\n    console.log(user[name]);\r\n    formData.append(name, user[name]);\r\n  }\r\n\r\n  // const {email, password} = user;\r\n  // const formData = new FormData();\r\n  // formData.append('email', email)\r\n  // formData.append('password', password)\r\n\r\n  for (var key of formData.keys()) {\r\n    console.log(\"MYKEY: \", key);\r\n  }\r\n\r\n  return fetch(`${API}user/login/`, {\r\n    method: \"POST\",\r\n\r\n    body: formData,\r\n  })\r\n    .then((response) => {\r\n      console.log(\"SUCCESS\", response);\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const authenticate = (data, next) => {\r\n  if (typeof window !== undefined) {\r\n    localStorage.setItem(\"jwt\", JSON.stringify(data));\r\n    next();\r\n  }\r\n};\r\n\r\nexport const isAuthenticated = () => {\r\n  if (typeof window == undefined) {\r\n    return false;\r\n  }\r\n  if (localStorage.getItem(\"jwt\")) {\r\n    return JSON.parse(localStorage.getItem(\"jwt\"));\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const signout = (next) => {\r\n  const userId = isAuthenticated() && isAuthenticated().user.id;\r\n\r\n  console.log(\"USERID: \", userId);\r\n\r\n  if (typeof window !== undefined) {\r\n    localStorage.removeItem(\"jwt\");\r\n    cartEmpty(() => {});\r\n    //next();\r\n\r\n    return fetch(`${API}user/logout/${userId}`, {\r\n      method: \"GET\",\r\n    })\r\n      .then((response) => {\r\n        console.log(\"Signout success\");\r\n        next();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}