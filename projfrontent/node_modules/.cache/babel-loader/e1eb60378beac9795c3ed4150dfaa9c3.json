{"ast":null,"code":"import _defineProperty from\"E:/PROJECTS/Python/WTS/projfrontent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:/PROJECTS/Python/WTS/projfrontent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/PROJECTS/Python/WTS/projfrontent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Link,Redirect}from\"react-router-dom\";import Base from\"../core/Base\";import{signin,authenticate,isAuthenticated}from\"../auth/helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Signin=function Signin(){var _useState=useState({name:\"\",email:\"\",password:\"\",error:\"\",success:false,loading:false,didRedirect:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var name=values.name,email=values.email,password=values.password,error=values.error,success=values.success,loading=values.loading,didRedirect=values.didRedirect;var handleChange=function handleChange(name){return function(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({error:false},name,event.target.value)));};};var onSumit=function onSumit(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{error:false,loading:true}));signin({email:email,password:password}).then(function(data){console.log(\"DATA\",data);if(data.token){//let sessionToken = data.token;\nauthenticate(data,function(){console.log(\"TOKKEN ADDED\");setValues(_objectSpread(_objectSpread({},values),{},{didRedirect:true}));});}else{setValues(_objectSpread(_objectSpread({},values),{},{loading:false}));}}).catch(function(e){return console.log(e);});};var performRedirect=function performRedirect(){if(isAuthenticated()){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}};var loadingMessage=function loadingMessage(){return loading&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"})});};// eslint-disable-next-line\nvar successMessage=function successMessage(){return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 offset-sm-3 text-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success\",style:{display:success?\"\":\"none\"},children:[\"New account created successfully. Please\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"login now.\"})]})})});};// eslint-disable-next-line\nvar errorMessage=function errorMessage(){return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 offset-sm-3 text-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",style:{display:error?\"\":\"none\"},children:\"Check all fields again\"})})});};// eslint-disable-next-line\nvar signInForm=function signInForm(){return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 offset-sm-3 text-left\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-light\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",className:\"form-control\",value:email,onChange:handleChange(\"email\"),type:\"text\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-light\",children:\"password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",className:\"form-control\",value:password,onChange:handleChange(\"password\"),type:\"current-password\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onSumit,className:\"btn btn-success btn-block\",children:\"Submit\"})]})})});};return/*#__PURE__*/_jsxs(Base,{title:\"Welcome to sign in page\",description:\"WeTrainSmart store\",children:[loadingMessage(),errorMessage(),successMessage(),signInForm(),/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:JSON.stringify(values)}),performRedirect()]});};export default Signin;","map":{"version":3,"sources":["E:/PROJECTS/Python/WTS/projfrontent/src/user/Signin.js"],"names":["React","useState","Link","Redirect","Base","signin","authenticate","isAuthenticated","Signin","name","email","password","error","success","loading","didRedirect","values","setValues","handleChange","event","target","value","onSumit","preventDefault","then","data","console","log","token","catch","e","performRedirect","loadingMessage","successMessage","display","errorMessage","signInForm","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\nimport Base from \"../core/Base\";\r\nimport { signin, authenticate, isAuthenticated } from \"../auth/helper\";\r\n\r\nconst Signin = () => {\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    error: \"\",\r\n    success: false,\r\n    loading: false,\r\n    didRedirect: false,\r\n  });\r\n  const {\r\n    // eslint-disable-next-line\r\n    name,\r\n    email,\r\n    password,\r\n    error,\r\n    success,\r\n    loading,\r\n    // eslint-disable-next-line\r\n    didRedirect } = values;\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const onSumit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: false, loading: true });\r\n\r\n    signin({ email, password })\r\n      .then((data) => {\r\n        console.log(\"DATA\", data);\r\n        if (data.token) {\r\n          //let sessionToken = data.token;\r\n          authenticate(data, () => {\r\n            console.log(\"TOKKEN ADDED\");\r\n            setValues({\r\n              ...values,\r\n              didRedirect: true,\r\n            });\r\n          });\r\n        } else {\r\n          setValues({\r\n            ...values,\r\n            loading: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  const performRedirect = () => {\r\n    if (isAuthenticated()) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n  };\r\n\r\n  const loadingMessage = () => {\r\n    return (\r\n      loading && (\r\n        <div className=\"alert alert-info\">\r\n          <h2>Loading...</h2>\r\n        </div>\r\n      )\r\n    );\r\n  };\r\n  // eslint-disable-next-line\r\n  const successMessage = () => {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-md-6 offset-sm-3 text-left\">\r\n          <div\r\n            className=\"alert alert-success\"\r\n            style={{ display: success ? \"\" : \"none\" }}\r\n          >\r\n            New account created successfully. Please{\" \"}\r\n            <Link to=\"/signin\">login now.</Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // eslint-disable-next-line\r\n  const errorMessage = () => {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-md-6 offset-sm-3 text-left\">\r\n          <div\r\n            className=\"alert alert-danger\"\r\n            style={{ display: error ? \"\" : \"none\" }}\r\n          >\r\n            Check all fields again\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  // eslint-disable-next-line\r\n\r\n  const signInForm = () => {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-md-6 offset-sm-3 text-left\">\r\n          <form>\r\n            <div className=\"form-group\">\r\n              <label className=\"text-light\">Email</label>\r\n              <input\r\n                name=\"email\"\r\n                className=\"form-control\"\r\n                value={email}\r\n                onChange={handleChange(\"email\")}\r\n                type=\"text\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label className=\"text-light\">password</label>\r\n              <input\r\n                name=\"password\"\r\n                className=\"form-control\"\r\n                value={password}\r\n                onChange={handleChange(\"password\")}\r\n                type=\"current-password\"\r\n              />\r\n            </div>\r\n            <button onClick={onSumit} className=\"btn btn-success btn-block\">\r\n              Submit\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Base title=\"Welcome to sign in page\" description=\"WeTrainSmart store\">\r\n      {loadingMessage()}\r\n      {errorMessage()}\r\n      {successMessage()}\r\n\r\n      {signInForm()}\r\n      <p className=\"text-center\">{JSON.stringify(values)}</p>\r\n      {performRedirect()}\r\n    </Base>\r\n  );\r\n};\r\n\r\nexport default Signin;\r\n"]},"metadata":{},"sourceType":"module"}